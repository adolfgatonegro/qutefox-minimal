:root {
	--tab-font: 'CozetteVector';
	--urlbar-font: 'monospace';

	/* try increasing if you encounter problems */
	--urlbar-height-setting: 22px;
	--tab-min-height: 26px !important;
  --tab-block-margin: 0px !important;

	/* I don't recommend you touch this unless you know what you're doing */
	--arrowpanel-menuitem-padding: 2px !important;
	--toolbarbutton-inner-padding: 0px !important;
	--uc-autohide-toolbox-delay: 500ms;
	--uc-toolbox-rotation: 82deg;
}

/* Source file https://github.com/MrOtherGuy/firefox-csshacks/tree/master/chrome/autohide_bookmarks_and_main_toolbars.css made available under Mozilla Public License v. 2.0
See the above repository for updates as well as full license text. */

#navigator-toolbox{
  --uc-bm-padding: 4px; /* Vertical padding to be applied to bookmarks */
  --uc-bm-height: calc(20px + 2 * var(--uc-bm-padding)); /* Might need to adjust if the toolbar has other buttons */
  --uc-navbar-height: -21px; /* navbar is main toolbar. Use negative value */
  --uc-autohide-toolbar-delay: 600ms; /* The toolbar is hidden after 0.6s */
  --uc-toolbox-browser-area-overlap: -1px;
}
:root[uidensity="compact"] #navigator-toolbox{
  --uc-navbar-height: -21px;
}
:root[uidensity="touch"] #navigator-toolbox{ --uc-bm-padding: 6px }

:root[chromehidden~="directories"] #navigator-toolbox{
  --uc-bm-height: 0px;
}
:root[chromehidden~="toolbar"] #navigator-toolbox{
  --uc-navbar-height: 0px;
}
/* At least on Windows 10 display scaling > 100% causes 1px gap to appear below tabs depending on Firefox
 *  density settings and whether or not menubar is enabled. 
 */
@media (min-resolution: 120dpi){
  :root[uidensity="compact"] #navigator-toolbox:has(> #toolbar-menubar[autohide="false"]){
    --uc-toolbox-browser-area-overlap: -0.5px;
  }
}
@media (min-resolution: 140dpi){
  #navigator-toolbox{
    --uc-toolbox-browser-area-overlap: -0.5px;
  }
}

#navigator-toolbox,
#sidebar-box,
#sidebar-main,
#sidebar-splitter,
#tabbrowser-tabbox{
  z-index: auto !important;
}

:root[sessionrestored] #nav-bar,
:root[sessionrestored] #PersonalToolbar{
  background-image: linear-gradient(var(--toolbar-bgcolor),var(--toolbar-bgcolor)), var(--lwt-additional-images,var(--toolbar-bgimage))  !important;
  background-position: top,var(--lwt-background-alignment);
  background-position-y: calc(0px - var(--tab-min-height) - 2*var(--tab-block-margin,0px));
  background-repeat: repeat,var(--lwt-background-tiling);
  transform: rotateX(90deg);
  transform-origin: top;
  transition: transform 135ms linear var(--uc-autohide-toolbar-delay) !important;
  z-index: 2;
}
#PlacesToolbarItems > .bookmark-item,
#OtherBookmarks,
#PersonalToolbar > #import-button{
  padding-block: var(--uc-bm-padding) !important;
}
:root[sessionrestored] #PersonalToolbar{
  z-index: 1;
  background-position-y: calc(0px - var(--tab-min-height) - 2*var(--tab-block-margin,0px) + var( --uc-navbar-height));
}

:root[lwtheme-image] #nav-bar,
:root[lwtheme-image] #PersonalToolbar{
  background-image: linear-gradient(var(--toolbar-bgcolor),var(--toolbar-bgcolor)),var(--lwt-header-image), var(--lwt-additional-images,var(--toolbar-bgimage)) !important;
}

#nav-bar[customizing],#PersonalToolbar[customizing]{ transform: none !important }

#navigator-toolbox > #PersonalToolbar{
  transform-origin: 0px var(--uc-navbar-height);
  position: relative;
}
:root[sessionrestored] #urlbar[popover]{
  opacity: 0;
  pointer-events: none;
  transition: transform 135ms linear var(--uc-autohide-toolbar-delay), opacity 0ms calc(var(--uc-autohide-toolbar-delay) + 135ms);
  transform-origin: 0px calc((var(--urlbar-container-height) - var(--urlbar-height)) / 2);
  transform: rotateX(89.5deg);
}
#mainPopupSet:has(> [panelopen]:not(#ask-chat-shortcuts,#selection-shortcut-action-panel,#chat-shortcuts-options-panel,#tab-preview-panel)) ~ toolbox #urlbar[popover],
#navigator-toolbox:is(:hover,:focus-within) #urlbar[popover],
#urlbar-container > #urlbar[popover]:is([focused],[open]){
  opacity: 1;
  pointer-events: auto;
  transition-delay: 100ms;
  transform: rotateX(0deg);
}

:root[sessionrestored]:not([customizing]) #navigator-toolbox{
  margin-bottom:  calc(var(--uc-toolbox-browser-area-overlap,0px) - var(--uc-bm-height) + var(--uc-navbar-height));
}

/* Make sure the bookmarks toolbar is never collapsed even if it is disabled */
:root[sizemode="fullscreen"] #PersonalToolbar,
#PersonalToolbar[collapsed="true"]{
  min-height: initial !important;
  max-height: initial !important;
  visibility: hidden !important
}
#PersonalToolbar[collapsed="true"] #PlacesToolbarItems > *,
:root[sizemode="fullscreen"] #PersonalToolbar #PlacesToolbarItems > *{
  visibility: hidden !important;
}

/* If bookmarks toolbar is collapsed on startup, then no items are generated, and we need to set some height for it */
#PlacesToolbarItems:empty{
  height: var(--uc-bm-height);
}

/* Selected tab needs higher z-index now to "hide" the broder below it */
.tabbrowser-tab[selected]{ z-index: 3 !important; }

/* SELECT TOOLBAR BEHAVIOR */
/* Comment out or delete one of these to disable that behavior */

/* Show when urlbar is focused */
#nav-bar:focus-within + #PersonalToolbar,
#navigator-toolbox > #nav-bar:focus-within{
  transition-delay: 100ms !important;
  transform: rotateX(0);
}

/* Show when cursor is over the toolbar area or when some menu panel is open */
#mainPopupSet:has(> [panelopen]:not(#ask-chat-shortcuts,#selection-shortcut-action-panel,#chat-shortcuts-options-panel,#tab-preview-panel)) ~ #navigator-toolbox > :is(#nav-bar,#PersonalToolbar),
#navigator-toolbox:hover > :is(#nav-bar,#PersonalToolbar){
  transition-delay: 100ms !important;
  transform: rotateX(0);
}

/* This makes the tab notification box show immediately below tabs, otherwise it would break the layout */
#navigator-toolbox > div{ display: contents }
:where(#titlebar,#navigator-toolbox > #TabsToolbar,#navigator-toolbox > #toolbar-menubar,#tab-notification-deck,.global-notificationbox){
  order: -1;
}
:root[BookmarksToolbarOverlapsBrowser] #navigator-toolbox{
  margin-bottom: calc(-1px - var(--uc-bm-height) + var(--uc-navbar-height)) !important;
  z-index: auto !important;
}
@media (-moz-bool-pref: "browser.fullscreen.autohide"),
       -moz-pref("browser.fullscreen.autohide"){
  :root[sizemode="fullscreen"] #navigator-toolbox[style*="margin-top"]{
    margin-top: calc(1px - var(--tab-min-height) - 2 * var(--tab-block-margin)) !important;
  }
}

/* Set the following pref to enable compatibility with multi-row_bookmarks.css */
@media (-moz-bool-pref: "userchrome.autohide-bm-and-main-toolbars.multirow-bookmarks-compat.enabled"),
       -moz-pref("userchrome.autohide-bm-and-main-toolbars.multirow-bookmarks-compat.enabled"){
  #navigator-toolbox{ margin-bottom: var(--uc-navbar-height) !important; }
  #PersonalToolbar:not([customizing]){
    min-height: 0 !important;
    margin-bottom: 0;
    height: 0;
    overflow-y: visible !important;
    z-index: 2;
    padding-inline: 0 !important;
  }
  #personal-bookmarks{
    background: inherit;
    height: min-content;
  }
  #PlacesToolbarDropIndicatorHolder{
    pointer-events: none !important;
  }
}

/*****************************************************************************/
/* GENERAL UI TWEAKS                                                         */
/*****************************************************************************/


/* Move status panel to the right */
#statuspanel-label {
	border-radius: 0px !important; 
	border: 0px !important;
}

#statuspanel {
    position: absolute;
    bottom: 1vh !important;
    left: 1vw !important;
	max-width: 50% !important;
	justify-self: right !important;
	padding-top: 0 !important;
	inset-inline: auto !important;
	min-width: unset !important;
}

/*****************************************************************************/
/* NAVBAR DEBLOATING                                                         */
/*****************************************************************************/

/* Remove unnecessary buttons */
#back-button,
#forward-button, 
#reload-button, 
#stop-button,
#home-button, 
#library-button, 
#fxa-toolbar-menu-button
#customizableui-special-spring1, 
#customizableui-special-spring2 {
	display: none;
}

/*****************************************************************************/
/* URLBAR DEBLOATING                                                         */
/*****************************************************************************/


/* #identity-box, */
/* #pageActionButton, */
#pocket-button,
/* #urlbar-zoom-button, */
/* #tracking-protection-icon-container, */
/* #reader-mode-button, */
#userContext-label, #userContext-indicator,
#urlbar-go-button,
#star-button { display: none !important; }
#star-button-box:hover { background: inherit !important; }
#star-button-box { display: none !important; }
#urlbar-searchmode-switcher { display: none; }
#searchmode-switcher-chicklet { display: none !important; }

/*****************************************************************************/
/* NAVBAR STYLING                                                            */
/*****************************************************************************/

/* Remove padding between toolbar buttons */
toolbar .toolbarbutton-1{
  padding: 2px 4px !important;
}

toolbar .toolbarbutton-1, .urlbar-input-container box, .urlbar-icon {
  transform: scale(0.8) !important;
}

#urlbar-container {
	--urlbar-container-height: var(--urlbar-height-setting) !important;
	margin-left: 0 !important;
	margin-right: 0 !important;
	padding-top: 0 !important;
	padding-bottom: 0 !important;
	font-family: var(--urlbar-font, 'monospace');
	font-size: 10px;
}

#urlbar {
	--urlbar-height: var(--urlbar-height-setting) !important;
	--urlbar-toolbar-height: var(--urlbar-height-setting) !important;
	min-height: var(--urlbar-height-setting) !important;
	border-color: var(--lwt-toolbar-field-border-color, hsla(240,5%,5%,.25)) !important;
}

#urlbar-input {
	margin-left: 0.4em !important;
	margin-right: 0.4em !important;
}

#navigator-toolbox {
	border: none !important;
}

/* Keep pop-up menus from overlapping with navbar */
#widget-overflow, 
#appMenu-popup, 
#customizationui-widget-panel,
#unified-extensions-panel {
	margin: 0 !important;
}

/* Make browser dialog boxes not overlap the navbar */
:not(.content-prompt-dialog) > .dialogOverlay > .dialogBox:not(.spotlightBox) {
	margin-top: 0px !important;
}

/*****************************************************************************/
/* UNIFIED EXTENSIONS BUTTON                                                 */
/*****************************************************************************/

/* Make extension icons smaller */
#unified-extensions-view {
	--uei-icon-size: 12px !important;
}

/* Hide extra info below extension names */
.unified-extensions-item-message-deck,
#unified-extensions-view > .panel-header,
#unified-extensions-view > toolbarseparator,
#unified-extensions-manage-extensions {
	display: none !important;
}

/* Add 3px padding on the top and the bottom of the box */
.panel-subview-body {
	padding: 3px 0px !important;
}

#unified-extensions-view .toolbarbutton-icon {
	padding: 0 !important;
}

.unified-extensions-item-contents {
	line-height: 1 !important;
	white-space: nowrap !important;
}

#unified-extensions-panel .unified-extensions-item {
	margin-block: 0 !important;
}

.toolbar-menupopup :is(menu, menuitem), .subview-subheader, panelview
.toolbarbutton-1, .subviewbutton, .widget-overflow-list .toolbarbutton-1 {
	padding: 4px !important;
}

/* --- STYLE TAB TOOLBAR -------------------------------- */

#titlebar {
	--proton-tab-block-margin: 0px !important;
	--tab-block-margin: 0px !important;
}

#TabsToolbar, .tabbrowser-tab {
	min-height: var(--tab-min-height) !important;
	font-size: 13px !important;
}

/* Change color of normal tabs */
tab:not([selected="true"]) {
	background-color: var(--tab-inactive-bg-color) !important;
	color: var(--identity-icon-color, var(--tab-inactive-fg-fallback-color)) !important;
}

tab {
	font-family: var(--tab-font, monospace);
	font-weight: normal;
	border: none !important;
  padding: 0px !important;
}

/* Hide close button on tabs */
#tabbrowser-tabs .tabbrowser-tab .tab-close-button { display: none !important; }

/* Reduce favicons size */
.tabbrowser-tab .tab-icon-image { transform: scale(0.80) !important; }

/* Hide favicons except for pinned tabs */
.tab-icon-stack:not([pinned]) { display: none !important; }*/

.tabbrowser-tab {
	/* Remove border between tabs */
	padding-inline: 0px !important;
	/* Reduce fade effect of tab text */
	--tab-label-mask-size: 1em !important;
	/* Fix pinned tab behaviour on overflow */
	overflow-clip-margin: 0px !important;
}

/* Center tab label */
/* Source file https://github.com/MrOtherGuy/firefox-csshacks/tree/master/chrome/centered_tab_label.css made available under Mozilla Public License v. 2.0
See the above repository for updates as well as full license text. */

.tab-label-container{
  display: grid;
  align-content: center;
}

.tab-secondary-label{
  justify-content: center;
}

.tab-label,
.tab-secondary-label{ overflow: hidden }

.tabbrowser-tab[selected]:not(:hover) .tab-label-container:not([labeldirection="rtl"]),
#tabbrowser-tabs:not([closebuttons="activetab"]) .tabbrowser-tab:not(:hover,[pinned]) .tab-label-container:not([labeldirection="rtl"]){
  margin-inline-end: 0 !important;
}
/* End Center tab label */

/* Hide window controls */
.titlebar-buttonbox-container { display: none; }

/* Remove titlebar spacers */
.titlebar-spacer { display: none !important; }

/* Safari-style tabs */
.tabbrowser-tab[fadein] {
	max-width: 100vw !important;
	border: none
}

/* Disable tab shadow */
#tabbrowser-tabs:not([noshadowfortests]) .tab-background:is([selected], [multiselected]) {
    box-shadow: none !important;
}

/* Disable tab border radius */
.tab-background {
    border-radius: 0px !important;
}

/* Remove dark space between pinned tab and first non-pinned tab */
#tabbrowser-tabs[haspinnedtabs]:not([positionpinnedtabs]) >
#tabbrowser-arrowscrollbox >
.tabbrowser-tab:nth-child(1 of :not([pinned], [hidden])) {
	margin-inline-start: 0px !important;
}
#pinned-tabs-container[orient="horizontal"]{
	margin-inline-end: 0px !important;
}

/* Remove dropdown menu button which displays all tabs on overflow */
#alltabs-button { display: none !important }

/* Fix displaying of pinned tabs on overflow */
#tabbrowser-tabs:not([secondarytext-unsupported]) .tab-label-container {
	height: var(--tab-min-height) !important;
}

/* Remove overflow scroll buttons */
#scrollbutton-up, #scrollbutton-down { display: none !important; }

/* Remove new tab button */
#tabs-newtab-button {
	display: none !important;
}

/* Hide private browsing indicator */
.private-browsing-indicator-label {
 	display: none !important;
}

/* Hide speaker overlay on pinned tabs */
.tab-icon-overlay[soundplaying][pinned] {
    display: none !important;
}

/* Hide audio button on tabs */
.tabbrowser-tab[soundplaying] .tab-secondary-label,
.tabbrowser-tab[muted] .tab-secondary-label,
.tabbrowser-tab[activemedia-blocked] .tab-secondary-label,
.tabbrowser-tab[pictureinpicture="true"] .tab-icon-sound-pip-label {
  display: flex !important;
  text-wrap: nowrap !important;
}

.tab-audio-button,
.tabbrowser-tab[soundplaying] .tab-icon-sound-pip-label,
.tabbrowser-tab[muted] .tab-icon-sound-pip-label,
.tabbrowser-tab[activemedia-blocked] .tab-icon-sound-pip-label {
  display: none !important;
  opacity: 0 !important;
  z-index: 1;
}

.tabbrowser-tab[soundplaying],
.tabbrowser-tab[muted],
.tabbrowser-tab[activemedia-blocked],
.tabbrowser-tab[pictureinpicture="true"] {
  & :hover {
    & .tab-audio-button {
      opacity: 1 !important;
    }
    & .tab-icon-stack:not([pinned]) {
      opacity: 0 !important;
    }
  }
}